# Immediate OTA Text Refresh + License Alignment

## Scope confirmed
- Add immediate refresh when newly fetched OTA translations are applied.
- Expose both integration styles: a flexible controller signal/event and a premade builder path.
- Trigger the refresh only for fetched updates (not cache-load during initialize).
- Keep this behavior optional/opt-in; do not force a new refresh behavior on existing consumers.
- Align the package license notice with BasalBit Impressum legal entity details.

## Recommended implementation
1. Add a fetched-update-specific signal to the controller.
   - In `lib/src/controller/ota_localization_controller.dart`, add a dedicated fetched-only revision/listenable API (for flexible app-level listeners).
   - Increment it only inside `checkForUpdates()` when `updated.isNotEmpty`.
   - Keep current `revision` + `notifyListeners()` semantics unchanged for backward compatibility.
   - Do not emit fetched-only signal from `_loadCachedBundles()`.
   - Dispose/cleanup any new notifier resources in `dispose()`.

2. Add a premade widget mode for fetched-only refresh.
   - In `lib/src/widget/ota_typed_localization_builder.dart`, add a refresh mode enum and parameter.
   - Keep current behavior as default (rebuild on any controller change), so existing consumers are unaffected.
   - Add fetched-only mode that rebuilds only when fetched-update signal changes.

3. Do not change generated integration defaults in this pass.
   - Leave `ReRune` generated behavior unchanged to avoid forcing behavior changes on current users.
   - Document the new fetched-only behavior as an optional integration path via controller signal or builder mode.

4. Add focused tests for update-triggered refresh behavior.
   - Extend `test/rerune_test.dart` with controller tests covering:
     - fetched update applied -> fetched-only signal increments/emits.
     - no update / 304 / errors -> no fetched-only signal.
     - cache load during initialize -> no fetched-only signal.
   - Add `test/ota_typed_localization_builder_test.dart` for builder modes:
     - default mode rebuilds on existing controller notifications.
     - fetched-only mode rebuilds only after actual fetched update apply.

5. Document the new API and release notes.
   - Update `README.md` with two usage patterns:
      - listen to controller fetched-update signal/event.
      - use builder fetched-only mode.
   - Explicitly document that existing behavior remains the default and fetched-only refresh is opt-in.
   - Update `CHANGELOG.md` under Unreleased.

6. Update license notice using Impressum legal entity.
   - In `LICENSE`, change copyright holder from `BasalBit` to `BasalBit GmbH`.
   - Keep MIT terms unchanged.

## Files to modify
- `lib/src/controller/ota_localization_controller.dart`
- `lib/src/widget/ota_typed_localization_builder.dart`
- `lib/rerune.dart`
- `test/rerune_test.dart`
- `test/ota_typed_localization_builder_test.dart` (new)
- `README.md`
- `CHANGELOG.md`
- `LICENSE`

## Verification
1. Run package tests: `flutter test`.
2. Run controller-focused tests: `flutter test test/rerune_test.dart`.
3. Run builder-focused tests: `flutter test test/ota_typed_localization_builder_test.dart`.
4. Run example tests: from `example/`, `flutter test`.
5. Manual smoke check in example app:
   - integrate `OtaTypedLocalizationBuilder` in fetched-only mode.
   - trigger `checkForUpdates()` and confirm immediate UI refresh only when newly fetched OTA text changes are applied.
   - verify default builder usage still behaves exactly as before.
6. Legal check:
   - verify `LICENSE` uses `BasalBit GmbH` and MIT body remains intact.
